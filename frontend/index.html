<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Öztürk Otomobil Oto Elektrik</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Giriş / Kayıt Kutusu -->
  <div id="authBox" class="auth-container">
    <h1>ÖZTÜRK</h1>
    <h2>OTOMOBİL OTO ELEKTRİK</h2>

    <form id="loginForm">
      <input name="username" placeholder="Kullanıcı adı" required />
      <input name="password" type="password" placeholder="Şifre" required />
      <button type="submit">Giriş Yap</button>
      <p id="loginMessage" class="error"></p>
    </form>

    <button id="showRegister">Yeni Kullanıcı Ekle (Yalnızca Admin)</button>

    <form id="registerForm" style="display:none">
      <input name="username" placeholder="Yeni kullanıcı adı" required />
      <input name="password" type="password" placeholder="Yeni şifre" required />
      <button type="submit">Kayıt Et</button>
      <p id="registerMessage" class="error"></p>
    </form>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="dashboard" style="display:none">
    <!-- Üst Bar -->
    <div class="navbar">
      <div class="brand">ÖZTÜRK OTOMOBİL OTO ELEKTRİK</div>
      <div class="user">
        <span id="currentUser"></span>
        <button onclick="logout()">Çıkış Yap</button>
      </div>
    </div>

    <!-- Ana İçerik -->
    <div class="main">
      <!-- Sol Menü -->
      <div class="sidebar">
        <div class="tabs">
          <div class="tab active" data-tab="productTab">Ürün İşlemleri</div>
        </div>
      </div>

      <!-- İçerik -->
      <div class="content">
        <div id="productTab" class="tabContent active">

          <!-- Ürün Formu -->
          <form id="productForm">
            <input name="id" type="hidden" />
            <input name="name" placeholder="Ürün Adı" required />
            <input name="category" placeholder="Kategori" list="categoryOptions" />
            <datalist id="categoryOptions">
              <option value="Motor">
              <option value="Elektrik">
              <option value="Aksesuar">
            </datalist>

            <input name="brand" placeholder="Marka" list="brandOptions" />
            <datalist id="brandOptions">
              <option value="Bosch">
              <option value="Valeo">
              <option value="Delphi">
            </datalist>

            <input name="type" placeholder="Ürün Tipi" list="typeOptions" />
            <datalist id="typeOptions">
              <option value="Ampul">
              <option value="Sigorta">
              <option value="Kablo">
            </datalist>

            <input name="shelf" placeholder="Raf" />
            <input name="quantity" type="number" placeholder="Stok Miktarı" />
            <input name="minQuantity" type="number" placeholder="Kritik Stok" />
            <input name="buyPrice" type="number" step="0.01" placeholder="Alış Fiyatı" />
            <input name="sellPrice" type="number" step="0.01" placeholder="Satış Fiyatı" />
            <input name="codes" placeholder="Kodlar (virgülle)" />
            <textarea name="description" placeholder="Açıklama"></textarea>

            <div style="display:flex; gap:10px">
              <button type="submit">Kaydet</button>
              <button type="button" id="clearFormBtn">Temizle</button>
            </div>
          </form>

          <!-- Detaylı Arama -->
          <div class="filter-section">
            <h3>Detaylı Arama</h3>
            <div class="filter-row">
              <input id="filterKeyword" placeholder="Arama kelimesi..." />
              <input id="filterCategory" placeholder="Kategori" list="categoryOptions" />
              <input id="filterBrand" placeholder="Marka" list="brandOptions" />
              <input id="filterType" placeholder="Tip" list="typeOptions" />
            </div>
            <div class="filter-row">
              <input type="date" id="filterFromDate" />
              <input type="date" id="filterToDate" />
            </div>
            <div class="filter-row">
              <div class="critical-stock-toggle">
                <input type="checkbox" id="onlyCriticalStock" />
                <label for="onlyCriticalStock">Kritik stokta olanları göster</label>
              </div>
              <button id="filterBtn">Ara</button>
              <button id="clearBtn">Temizle</button>
              <span id="filterMatches"></span>
            </div>
          </div>

          <!-- Ürün Listesi -->
          <ul id="productsUl"></ul>

          <!-- Satış Raporu -->
          <div class="report-section">
            <h3>Satış Raporu</h3>
            <div class="filter-row">
              <input type="date" id="fromDate" />
              <input type="date" id="toDate" />
              <button id="reportBtn">Rapor Al</button>
            </div>
            <pre id="reportResult"></pre>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="auth.js"></script>
  <script src="product.js"></script>
</body>
</html>
